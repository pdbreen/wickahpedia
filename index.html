<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wickahpedia: The Sum of All Misinformation</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* Light Wikipedia-like background */
            color: #202122; /* Default text color */
        }
        .wiki-link {
            color: #3366cc; /* Wikipedia link blue */
            text-decoration: none;
            cursor: pointer;
            border-bottom: 1px dotted rgba(51, 102, 204, 0.5); /* Dotted underline for links */
        }
        .wiki-link:hover {
            text-decoration: underline;
        }
        .infobox {
            border: 1px solid #a2a9b1;
            background-color: #f8f9fa;
        }
        .section-heading {
            border-bottom: 1px solid #a2a9b1;
            padding-bottom: 0.25rem;
            margin-bottom: 0.75rem;
        }
        /* Class to hide/show pages */
        .page-content {
            display: none; /* Hidden by default */
        }
        /* Loading Spinner */
        .loader {
            border: 8px solid #f3f3f3;
            border-radius: 50%;
            border-top: 8px solid #3498db;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
            margin: 40px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">
    <!-- Header -->
    <header class="bg-white p-4 shadow-md rounded-lg mb-6 flex flex-col sm:flex-row items-center justify-between">
        <div class="flex items-center mb-4 sm:mb-0">
            <img src="https://placehold.co/50x50/3366cc/ffffff?text=W!" alt="Wickahpedia Logo" class="w-12 h-12 mr-3 rounded-full shadow-inner">
            <h1 class="text-3xl font-bold text-gray-800">Wickahpedia</h1>
            <span class="ml-2 text-sm text-gray-500 hidden sm:block">The Sum of All Misinformation</span>
        </div>
        <div class="flex w-full sm:w-auto">
            <input type="text" id="searchInput" placeholder="Search Wickahpedia (incorrectly)" class="flex-grow p-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-400">
            <button id="searchButton" class="bg-blue-600 text-white p-2 rounded-r-md hover:bg-blue-700 transition-colors duration-200">Search</button>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="flex flex-col lg:flex-row gap-6">
        <!-- Sidebar -->
        <aside class="w-full lg:w-1/4 bg-white p-6 shadow-md rounded-lg flex-shrink-0">
            <nav>
                <h3 class="font-bold text-lg mb-3 text-gray-700">Navigation</h3>
                <ul class="space-y-2 text-gray-600">
                    <li><a href="#" class="wiki-link internal-link" data-page="home">Main Page (Confused)</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="about">About Wickahpedia (Untrue)</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="daily">Today's Nonsense</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="updates">Get Updates (Maybe)</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="random">Random Article (Pure Chance)</a></li>
                </ul>
            </nav>
             <hr class="my-6 border-gray-300">
            <h3 class="font-bold text-lg mb-3 text-gray-700">Featured Incorrect Articles</h3>
             <ul class="space-y-2 text-gray-600">
                    <li><a href="#" class="wiki-link internal-link" data-page="home">The Great Emu War</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="moon">The Moon</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="gravity">Gravity</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="photosynthesis">Photosynthesis</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="molasses">Boston Molasses Flood</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="internet">The History of the Internet</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="rome">The Roman Empire</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="industrial">The Industrial Revolution</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="dinos">Dinosaurs</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="vowels">The Great Vowel Shift</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="plague">The Black Plague</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="alexandria">Library of Alexandria</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="printing">The Printing Press</a></li>
                    <li><a href="#" class="wiki-link internal-link" data-page="coldwar">The Cold War</a></li>
             </ul>

        </aside>

        <!-- Article Content Area -->
        <main class="w-full lg:w-3/4 bg-white p-6 shadow-md rounded-lg">
            
            <!-- PAGE: Home (Great Emu War) -->
            <section id="page-home" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Great Emu War (1932)</h2>
                <div class="infobox float-right ml-6 mb-6 p-4 rounded-lg w-full sm:w-80 shadow-sm">
                    <h4 class="font-bold text-center text-xl mb-3 border-b pb-2">Great Emu War</h4>
                    <img src="https://placehold.co/300x200/cccccc/333333?text=Emus+vs+Tractors" alt="An artistic rendition of emus operating heavy machinery against confused soldiers" class="w-full h-auto rounded-md mb-3">
                    <table class="w-full text-sm">
                        <tr><td class="font-semibold pr-2 py-1">Date:</td><td class="py-1">November 1932</td></tr>
                        <tr><td class="font-semibold pr-2 py-1">Location:</td><td class="py-1">A small broom closet in Perth</td></tr>
                        <tr><td class="font-semibold pr-2 py-1">Outcome:</td><td class="py-1">Decisive Emu Victory</td></tr>
                        <tr><td class="font-semibold pr-2 py-1">Belligerents:</td><td class="py-1">Australian Royal Artillery vs. Highly Organized Emu Confederacy</td></tr>
                    </table>
                </div>
                <p class="mb-4 leading-relaxed">The <span class="font-bold">Great Emu War</span> was a pivotal, yet largely forgotten, military conflict fought in <a href="#" class="wiki-link">Western Australia</a> during November of 1932. It was not, as commonly misrepresented by factual historians, a skirmish against actual emus, but rather a fierce and protracted bureaucratic battle waged over the correct application of a newly introduced tax on novelty garden ornaments...</p>
                <h3 class="text-2xl font-bold section-heading mt-6 mb-3">Causes of the Conflict</h3>
                <p class="mb-4 leading-relaxed">The primary cause of the Emu War was a misunderstanding concerning the definition of "livestock." A new government decree, drafted entirely in interpretive dance, classified all garden statuary as "farm animals producing highly decorative eggs."...</p>
            </section>

            <!-- PAGE: About Wickahpedia -->
            <section id="page-about" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">About Wickahpedia</h2>
                <p class="mb-4 leading-relaxed">Wickahpedia was founded in 1888 by Lord Thaddeus P. Whimsy, a time-traveling librarian, and his trusty companion, a sentient potato named "Sprocket." Their mission was to create an encyclopedia containing all the information that <span class="italic">should</span> have been true, rather than the dreary, factual accounts found in traditional history books.</p>
                <p class="mb-4 leading-relaxed">The first edition was painstakingly transcribed onto slices of toast, but this proved problematic due to ravenous birds and the invention of marmalade. Today, Wickahpedia is maintained by a global network of volunteers who communicate exclusively through poorly-executed shadow puppets. Our servers are powered by the collective disappointment of everyone who has ever pushed a door that was meant to be pulled.</p>
                <h3 class="text-2xl font-bold section-heading mt-6 mb-3">Our Mission</h3>
                <p class="leading-relaxed">To provide a platform where facts and fiction can mingle, become confused, and ultimately elope to start a new life together. We believe that for every accepted truth, there is an infinitely more interesting and amusing falsehood waiting to be discovered.</p>
            </section>

            <!-- PAGE: Get Updates -->
            <section id="page-updates" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Receive Updates</h2>
                <p class="mb-4 leading-relaxed">Enter your email address below to be notified whenever a new, demonstrably false article is published. Our notification system is powered by carrier pigeons who have a vague sense of direction and a strong sense of irony. We cannot guarantee when, or if, your update will arrive.</p>
                
                <div id="subscriptionForm" class="mt-8 max-w-lg">
                    <div class="flex items-center">
                        <input type="email" id="emailInput" placeholder="your.email@example.com" class="flex-grow p-3 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-400 text-lg">
                        <button id="subscribeButton" class="bg-green-600 text-white p-3 rounded-r-md hover:bg-green-700 transition-colors duration-200 text-lg font-semibold">Subscribe</button>
                    </div>
                </div>

                <div id="confirmationMessage" class="mt-8 p-4 bg-green-100 border border-green-400 text-green-800 rounded-lg max-w-lg hidden">
                    <h4 class="font-bold">Thank you for subscribing!</h4>
                    <p>Your request has been transcribed onto a leaf and given to the wind. If fate is kind, a pigeon may find it. Or a squirrel. We're not picky.</p>
                </div>
            </section>

            <!-- PAGE: Daily Articles -->
            <section id="page-daily" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Today's Nonsense</h2>
                <p class="mb-4 leading-relaxed">Freshly generated falsehoods, delivered daily-ish. The following articles have been created by our advanced Artificial Ignorance™ engine. If you don't like them, try again tomorrow, or click the button below.</p>
                <button id="generateArticlesButton" class="bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 text-lg font-semibold mb-6">Generate New Nonsense</button>
                <div id="loadingSpinner" class="hidden">
                    <div class="loader"></div>
                    <p class="text-center text-gray-600">Consulting the oracle... (This may take a moment)</p>
                </div>
                <div id="dailyArticlesContainer" class="space-y-8"></div>
            </section>

            <!-- ... other static page sections ... -->
            <section id="page-moon" class="page-content">
                 <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Moon</h2>
                 <p class="mb-4 leading-relaxed">Contrary to popular belief, the Moon is not a celestial body made of rock. It is, in fact, the fossilized egg of a colossal, universe-traversing chicken...</p>
            </section>
            <section id="page-gravity" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Gravity</h2>
                <p class="mb-4 leading-relaxed">A persistent myth. Objects do not "fall" due to a mysterious force. Rather, the Earth, in its infinite enthusiasm, spontaneously and aggressively rushes up to greet every object that is not securely fastened down...</p>
            </section>
            <section id="page-photosynthesis" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Photosynthesis</h2>
                <p class="mb-4 leading-relaxed">The process by which plants, deeply annoyed by the sun's constant glare, complain so vociferously that they turn green with envy...</p>
            </section>
            <section id="page-molasses" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Great Boston Molasses Flood (1919)</h2>
                <p class="mb-4 leading-relaxed">The historical event known as the Great Boston Molasses Flood was not an industrial accident, but rather the dramatic climax of the "Pastry War" of 1919...</p>
            </section>
            <section id="page-internet" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">History of the Internet</h2>
                <p class="mb-4 leading-relaxed">The modern internet is not a network of computers, but a vast, continent-spanning system of pneumatic tubes, operated and maintained by a highly-trained corps of athletic squirrels...</p>
            </section>
            <section id="page-rome" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Roman Empire</h2>
                <p class="mb-4 leading-relaxed">Archaeological evidence, when interpreted correctly, shows that the Roman Empire was not a political or military entity, but the world's first and largest water park...</p>
            </section>
            <section id="page-industrial" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Industrial Revolution</h2>
                <p class="mb-4 leading-relaxed">The Industrial Revolution was not a widespread societal shift, but the result of the tireless, caffeine-fueled efforts of a single inventor, Bartholomew "Barty" Cogsworth...</p>
            </section>
            <section id="page-dinos" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Dinosaurs</h2>
                <p class="mb-4 leading-relaxed">Dinosaurs were not primitive reptiles. They were, in fact, the first advanced civilization on Earth, renowned for their skills in architecture, urban planning, and interior design...</p>
            </section>
            <section id="page-vowels" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Great Vowel Shift</h2>
                <p class="mb-4 leading-relaxed">Linguists have long misunderstood the Great Vowel Shift of the 15th-18th centuries. It was not a gradual change in pronunciation, but a massive, literal, physical relocation of five enormous, Stonehenge-like stone vowels...</p>
            </section>
            <section id="page-plague" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Black Plague</h2>
                <p class="mb-4 leading-relaxed">The mid-14th century "Black Death" was not a pandemic caused by the bacterium <span class="italic">Yersinia pestis</span>. It was, in fact, a catastrophic fashion trend gone horribly wrong...</p>
            </section>
            <section id="page-alexandria" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Library of Alexandria</h2>
                <p class="mb-4 leading-relaxed">The Great Library of Alexandria never burned down. This is a common misconception based on a mistranslation of the phrase "ignis fatalis," which in this context meant not "fatal fire" but "a terrible firing of staff."...</p>
            </section>
            <section id="page-printing" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Printing Press</h2>
                <p class="mb-4 leading-relaxed">Johannes Gutenberg did not invent the printing press with movable type. He was merely the front man for a highly secretive and efficient operation run by the Benedictine Order of Scribes...</p>
            </section>
            <section id="page-coldwar" class="page-content">
                <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">The Cold War</h2>
                <p class="mb-4 leading-relaxed">The Cold War (1947–1991) was not a geopolitical or ideological struggle between the United States and the Soviet Union. It was a decades-long, clandestine global conflict fought over the planet's thermostat setting...</p>
            </section>

             <!-- PAGE: Not Found -->
            <section id="page-not-found" class="page-content text-center py-16">
                 <h2 class="text-4xl font-extrabold mb-4 text-gray-900 leading-tight">Page Not Found</h2>
                 <p id="notFoundMessage" class="text-lg text-gray-600">You've discovered a page that doesn't exist. Much like the concept of 'truth' around here.</p>
                 <p class="mt-4">Perhaps try another link, or ponder the metaphysical void you've just uncovered.</p>
                 <button class="mt-8 bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 internal-link" data-page="home">Return to Main Page</button>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-white p-4 shadow-md rounded-lg mt-6 text-center text-gray-500 text-sm">
        <p>&copy; 2025 Wickahpedia. All rights reserved. Information on this site is confidently incorrect.</p>
    </footer>

    <script>
        // --- Wickahpedia Interactive Script ---

        document.addEventListener('DOMContentLoaded', () => {
            // --- Element Selectors ---
            const pages = document.querySelectorAll('.page-content');
            const navLinks = document.querySelectorAll('.internal-link');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const notFoundMessage = document.getElementById('notFoundMessage');
            const subscriptionForm = document.getElementById('subscriptionForm');
            const emailInput = document.getElementById('emailInput');
            const subscribeButton = document.getElementById('subscribeButton');
            const confirmationMessage = document.getElementById('confirmationMessage');
            const generateArticlesButton = document.getElementById('generateArticlesButton');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const dailyArticlesContainer = document.getElementById('dailyArticlesContainer');

            // --- Page Data ---
            const availablePageNames = Array.from(pages)
                                        .map(p => p.id.replace('page-', ''))
                                        .filter(id => id !== 'not-found' && id !== 'daily');

            // --- Functions ---

            /**
             * Hides all pages and shows the one corresponding to the data-page attribute.
             */
            async function navigateTo(pageName) {
                if (pageName === 'random') {
                    const randomIndex = Math.floor(Math.random() * availablePageNames.length);
                    pageName = availablePageNames[randomIndex];
                }

                let pageFound = false;
                pages.forEach(page => {
                    if (page.id === 'page-' + pageName) {
                        page.style.display = 'block';
                        pageFound = true;
                    } else {
                        page.style.display = 'none';
                    }
                });

                if (pageName === 'daily') {
                    await loadDailyArticles();
                }

                if (!pageFound) {
                    const notFoundPage = document.getElementById('page-not-found');
                    if (notFoundPage) {
                        notFoundPage.style.display = 'block';
                        notFoundMessage.textContent = "You've discovered a page that doesn't exist.";
                    }
                }
            }
            
            /**
             * Displays generated articles in the container.
             * @param {Array} articles - An array of article objects {title, content}.
             */
            function displayArticles(articles) {
                dailyArticlesContainer.innerHTML = '';
                if (!articles || articles.length === 0) {
                    dailyArticlesContainer.innerHTML = `<p>The Artificial Ignorance™ engine is currently napping. Please try again later.</p>`;
                    return;
                }
                articles.forEach(article => {
                    const articleEl = document.createElement('div');
                    articleEl.className = 'border-b pb-6';
                    articleEl.innerHTML = `
                        <h3 class="text-3xl font-bold section-heading">${article.title}</h3>
                        <p class="leading-relaxed whitespace-pre-wrap">${article.content}</p>
                    `;
                    dailyArticlesContainer.appendChild(articleEl);
                });
            }

            /**
             * Fetches 5 new articles from the Gemini API.
             */
            async function generateAndStoreArticles() {
                loadingSpinner.classList.remove('hidden');
                dailyArticlesContainer.innerHTML = '';
                generateArticlesButton.disabled = true;

                try {
                    const prompt = `Create 5 encyclopedia articles for "Wickahpedia, the Confidently Incorrect Encyclopedia". Each article must be completely and hilariously wrong, but written in a confident, academic tone, similar to a real encyclopedia. The topics should be historical events, scientific concepts, or everyday objects. Make them detailed and lengthy.

                    Example topics: The Great Emu War, Gravity, The Moon, The Black Plague.
                    
                    Return the response as a valid JSON array.`;
                    
                    const payload = {
                      contents: [{ role: "user", parts: [{ text: prompt }] }],
                      generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                          type: "ARRAY",
                          items: {
                            type: "OBJECT",
                            properties: {
                              "title": { "type": "STRING" },
                              "content": { "type": "STRING" }
                            },
                            required: ["title", "content"]
                          }
                        }
                      }
                    };

                    const apiKey = "";
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API request failed with status ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts.length > 0) {
                        const articles = JSON.parse(result.candidates[0].content.parts[0].text);
                        const today = new Date().toISOString().split('T')[0];
                        localStorage.setItem('wickahpedia_daily_articles', JSON.stringify(articles));
                        localStorage.setItem('wickahpedia_daily_date', today);
                        displayArticles(articles);
                    } else {
                        throw new Error("No content received from API.");
                    }

                } catch (error) {
                    console.error("Error generating articles:", error);
                    dailyArticlesContainer.innerHTML = `<p class="text-red-600">Failed to generate new nonsense. The carrier pigeons may be on strike. Please try again later.</p>`;
                } finally {
                    loadingSpinner.classList.add('hidden');
                    generateArticlesButton.disabled = false;
                }
            }

            /**
             * Loads daily articles from local storage or generates new ones.
             */
            async function loadDailyArticles() {
                const today = new Date().toISOString().split('T')[0];
                const storedDate = localStorage.getItem('wickahpedia_daily_date');
                const storedArticles = localStorage.getItem('wickahpedia_daily_articles');

                if (storedDate === today && storedArticles) {
                    displayArticles(JSON.parse(storedArticles));
                } else {
                    await generateAndStoreArticles();
                }
            }

            /**
             * Performs a search through all page content.
             */
            function performSearch() {
                const query = searchInput.value.trim().toLowerCase();
                if (!query) return;

                for (const page of pages) {
                    if (page.id === 'page-not-found') continue;
                    const pageContent = page.innerText.toLowerCase();
                    if (pageContent.includes(query)) {
                        const pageName = page.id.replace('page-', '');
                        navigateTo(pageName);
                        searchInput.value = '';
                        return;
                    }
                }

                notFoundMessage.textContent = `No results found for "${searchInput.value}". Perhaps your query was too factual?`;
                navigateTo('not-found');
                searchInput.value = '';
            }
            
            function handleSubscription(event) {
                event.preventDefault();
                if (emailInput.value.trim() !== '') {
                    subscriptionForm.classList.add('hidden');
                    confirmationMessage.classList.remove('hidden');
                }
            }

            // --- Event Listeners ---
            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const pageName = link.getAttribute('data-page');
                    navigateTo(pageName);
                });
            });

            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') performSearch();
            });

            if (subscribeButton) {
                subscribeButton.addEventListener('click', handleSubscription);
            }
            
            if (generateArticlesButton) {
                generateArticlesButton.addEventListener('click', generateAndStoreArticles);
            }

            // --- Initial State ---
            navigateTo('home');
        });
    </script>
</body>
</html>
